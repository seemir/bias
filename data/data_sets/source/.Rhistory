# ----------------------------------------------------------- #
# Install relevant packages (if not already done)
# ----------------------------------------------------------- #
Packages <- c("BaylorEdPsych", "mvnmle", "xtable", "Amelia",
"rlist", "mice", "caret")
# install.packages(Packages)
# ----------------------------------------------------------- #
# Load relevant packages
# ----------------------------------------------------------- #
lapply(Packages, library, character.only = TRUE)
source("_helper_func.R")
# ----------------------------------------------------------- #
# Load indicator and non indicator variables
# ----------------------------------------------------------- #
allDataFiles <- c("HFpEF_ind_var", "HFmrEF_ind_var",
"HFpEF_not_ind", "HFmrEF_not_ind")
lapply(gsub(" ", "", paste("data_files/", allDataFiles,
".Rdat")), load,.GlobalEnv)
# ----------------------------------------------------------- #
# Little's test to assess for missing completely at random.
# Remove variables with more than 60% missing values and
# that have near zero variance (not for indicator variables).
# ----------------------------------------------------------- #
# In HFpEF
# ----------------------------------------------------------- #
CutOff <- 0.4 # cut.off percentage
HFpEFind <- rm.missing(HFpEFmatInd, cut.off = CutOff,
near.zero.var = F)
HFpEFcon <- rm.missing(HFpEFmatNoInd, cut.off = CutOff)
FirstHFpEFcon <- split.matrix(HFpEFcon)$first.half
SecondHFpEFcon <- split.matrix(HFpEFcon)$second.half
HFpEFlist <- list(HFpEFind, FirstHFpEFcon, SecondHFpEFcon)
HFpEFmcar <- do.call(rbind, lapply(HFpEFlist, little.mcar))
HFpEFmcarNames <- c("indicator","continuous_1", "continuous_2")
rownames(HFpEFmcar) <- HFpEFmcarNames
# ----------------------------------------------------------- #
# In HFmrEF
# ----------------------------------------------------------- #
HFmrEFind <- rm.missing(HFmrEFmatInd, cut.off = CutOff,
near.zero.var = F)
HFmrEFcon <- rm.missing(HFmrEFmatNoInd, cut.off = CutOff)
FirstHFmrEFcon <- split.matrix(HFmrEFcon)$first.half
SecondHFmrEFcon <- split.matrix(HFmrEFcon)$second.half
HFmrEFlist <- list(HFmrEFind, FirstHFmrEFcon, SecondHFmrEFcon)
HFmrEFmcar <- do.call(rbind, lapply(HFmrEFlist, little.mcar))
HFmrEFmcarNames <- c("indicator","continuous_1","continuous_2")
rownames(HFmrEFmcar) <- HFmrEFmcarNames
xtable(rbind(HFpEFmcar, HFmrEFmcar), digits = c(0,0,0,4,0,5))
