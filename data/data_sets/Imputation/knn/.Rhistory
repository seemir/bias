# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(deparse(substitute(HEpEF_matrix)), '_k_',
as.character(K), '.Rdat'), collapse = "")
save(HEpEF_matrix, file=filename)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros, filename)
View(HEpEF_matrix)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(deparse(substitute(HEpEF_matrix)), '_k_',
as.character(K), '.Rdat'), collapse = "")
save(HEpEF_matrix, file=filename)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros, filename)
View(HEpEF_matrix)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
View(HEpEF_matrix)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
View(HEpEF_matrix_no_ind)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
View(HEpEF_matrix_ind_var)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
View(HEpEF_matrix_no_ind)
library(Hmisc)
library(impute)
library(reporttools)
library(VIM)
source("../_helper_func.R")
# Load HFpEF and HFmrEF datafiles
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
load("../../raw_data/data_use_HFmrEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HFpEF_matrix <- make_na(HFpEF_matrix)
HFmrEF_matrix <- make_na(HFmrEF_matrix)
# Remove the indicator variables as first step of analysis
HFpEF_rm_ind <- rm_indicator(HFpEF_matrix, n_uniq = 5)
HFmrEF_rm_ind <- rm_indicator(HFmrEF_matrix, n_uniq = 5)
HFpEF_matrix_not_ind <- HFpEF_rm_ind$non_indicator
HFmrEF_matrix_not_ind <- HFmrEF_rm_ind$non_indicator
# Store the indicator variables for later
HFpEF_matrix_ind_var <- HFpEF_rm_ind$indicator
HFmrEF_matrix_ind_var <- HFmrEF_rm_ind$indicator
# Move some variables between matrices in HFmrEF dataset
# Change RVfunction from non-indicator to indicator variable
HFmrEF_RV <- move_columns(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var,
"RVfunction")
HFmrEF_matrix_ind_var<- HFmrEF_RV$to_mat
HFmrEF_matrix_not_ind <- HFmrEF_RV$from_mat
# Change BmIadmission from indicator variable to non_indicator variables
HFmrEF_BMI <- move_columns(HFmrEF_matrix_ind_var, HFmrEF_matrix_not_ind,
"BmIadmission")
HFmrEF_matrix_ind_var<- HFmrEF_BMI$from_mat
HFmrEF_matrix_not_ind <- HFmrEF_BMI$to_mat
# Convert zeros to missings, the following variables are not to be convert.
not_zeros_HFpEF <- c("comorbidities", "weightchange", "daysfollowupdischarge",
"Timetonextadm")
not_zeros_HFmrEF <- c("numbercomorditiesnoIDA", "comorbidities", "Timetoadmission",
"Timetoecho", "timetofollowupfromBNP",
"timetofollowupfromdischarge",
"timetofirstcardiachospitalisation")
HFpEF_matrix_not_ind <- zero_to_na(HFpEF_matrix_not_ind, not_zeros_HFpEF)
HFmrEF_matrix_not_ind <- zero_to_na(HFmrEF_matrix_not_ind, not_zeros_HFmrEF)
# Plot of missing valus distribution
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.6)
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.6)
vmGUImenu()
library(VIM)
vmGUImenu()
vimGUImenu()
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
library(tikzDevice)
tikz(file="../../../../doc/thesis/images/HFpEF_missing_dist.tex")
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
tikz(file="HFpEF_missing_dist.tex")
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
dev.off()
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
dev.off()
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
colnames(HFmrEF_matrix)
# Load relevant packages
library(R.matlab)
library(data.table)
# Read matlab file into R
data_set_HFpEF <- readMat('data_use_HFpEF.mat')
data_set_HFmrEF <- readMat('data_use_HFmrEF.mat')
# Convert data into a R matrix and add header names
HFpEF_matrix <- data_set_HFpEF$All.data
HFmrEF_matrix <- data_set_HFmrEF$All.data
# Get patient ids
patient_id_HFpEF <- data_set_HFpEF$patientID
patient_id_HFmrEF <- data_set_HFmrEF$patientID
# Add patient ids to HF_matrices and all column names
HFpEF_matrix <- cbind(patient_id_HFpEF, HFpEF_matrix)
HFmrEF_matrix <- cbind(patient_id_HFmrEF, HFmrEF_matrix)
colnames(HFpEF_matrix) <- c('patient_id',
as.vector(unlist(
data_set_HFpEF$Varnames)))
colnames(HFmrEF_matrix) <- c('patient_id',
as.vector(unlist(
data_set_HFmrEF$Varnames)))
# Remove patient_id not to clog the analysis
rm(patient_id_HFpEF, patient_id_HFmrEF)
# Consolidate naming convensions for some variables
# In the HFmrEF matrix
setnames(as.data.frame(HFmrEF_matrix),
old=c("patient_id","Admissionweight","BMI","Numberofcomorbidities",
"Afrocaribbean","Caucasian","Pulse","NtproBNP","E"),
new = c("patientId","admissionwgt","BmIadmission","comorbidities",
"Black","White","pulse","NTproBNP", "Ewave"))
# In the HFpEF matrix
setnames(as.data.frame(HFpEF_matrix),
old = c("LVfunction", "E_e"), new = c("LVEF", "Ee"))
# Save the data frame as .Rdat
save(HFpEF_matrix, file='data_use_HFpEF_matrix.Rdat')
save(HFmrEF_matrix, file='data_use_HFmrEF_matrix.Rdat')
# Install relevant packages
# source("https://bioconductor.org/biocLite.R")
# biocLite("impute")
# install.packages("reporttools")
# install.packages("VIM")
# Load relevant packages and source helper functions
library(Hmisc)
library(impute)
library(reporttools)
library(VIM)
library(tikzDevice)
source("../_helper_func.R")
# Load HFpEF and HFmrEF datafiles
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
load("../../raw_data/data_use_HFmrEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HFpEF_matrix <- make_na(HFpEF_matrix)
HFmrEF_matrix <- make_na(HFmrEF_matrix)
# Remove the indicator variables as first step of analysis
HFpEF_rm_ind <- rm_indicator(HFpEF_matrix, n_uniq = 5)
HFmrEF_rm_ind <- rm_indicator(HFmrEF_matrix, n_uniq = 5)
HFpEF_matrix_not_ind <- HFpEF_rm_ind$non_indicator
HFmrEF_matrix_not_ind <- HFmrEF_rm_ind$non_indicator
# Store the indicator variables for later
HFpEF_matrix_ind_var <- HFpEF_rm_ind$indicator
HFmrEF_matrix_ind_var <- HFmrEF_rm_ind$indicator
# Move some variables between matrices in HFmrEF dataset
# Change RVfunction from non-indicator to indicator variable
HFmrEF_RV <- move_columns(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var,
"RVfunction")
HFmrEF_matrix_ind_var<- HFmrEF_RV$to_mat
HFmrEF_matrix_not_ind <- HFmrEF_RV$from_mat
# Change BmIadmission from indicator variable to non_indicator variables
HFmrEF_BMI <- move_columns(HFmrEF_matrix_ind_var, HFmrEF_matrix_not_ind,
"BmIadmission")
HFmrEF_matrix_ind_var<- HFmrEF_BMI$from_mat
HFmrEF_matrix_not_ind <- HFmrEF_BMI$to_mat
# Convert zeros to missings, the following variables are not to be convert.
not_zeros_HFpEF <- c("comorbidities", "weightchange", "daysfollowupdischarge",
"Timetonextadm")
not_zeros_HFmrEF <- c("numbercomorditiesnoIDA", "comorbidities", "Timetoadmission",
"Timetoecho", "timetofollowupfromBNP",
"timetofollowupfromdischarge",
"timetofirstcardiachospitalisation")
HFpEF_matrix_not_ind <- zero_to_na(HFpEF_matrix_not_ind, not_zeros_HFpEF)
HFmrEF_matrix_not_ind <- zero_to_na(HFmrEF_matrix_not_ind, not_zeros_HFmrEF)
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
tikzDevice(file="HFpEF.tex")
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
dev.off()
tikz(file="HFpEF.tex")
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
dev.off()
# Install relevant packages
# source("https://bioconductor.org/biocLite.R")
# biocLite("impute")
# install.packages("reporttools")
# install.packages("VIM")
# Load relevant packages and source helper functions
library(Hmisc)
library(impute)
library(reporttools)
library(VIM)
library(tikzDevice)
source("../_helper_func.R")
# Load HFpEF and HFmrEF datafiles
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
load("../../raw_data/data_use_HFmrEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HFpEF_matrix <- make_na(HFpEF_matrix)
HFmrEF_matrix <- make_na(HFmrEF_matrix)
# Remove the indicator variables as first step of analysis
HFpEF_rm_ind <- rm_indicator(HFpEF_matrix, n_uniq = 5)
HFmrEF_rm_ind <- rm_indicator(HFmrEF_matrix, n_uniq = 5)
HFpEF_matrix_not_ind <- HFpEF_rm_ind$non_indicator
HFmrEF_matrix_not_ind <- HFmrEF_rm_ind$non_indicator
# Store the indicator variables for later
HFpEF_matrix_ind_var <- HFpEF_rm_ind$indicator
HFmrEF_matrix_ind_var <- HFmrEF_rm_ind$indicator
# Move some variables between matrices in HFmrEF dataset
# Change RVfunction from non-indicator to indicator variable
HFmrEF_RV <- move_columns(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var,
"RVfunction")
HFmrEF_matrix_ind_var<- HFmrEF_RV$to_mat
HFmrEF_matrix_not_ind <- HFmrEF_RV$from_mat
# Change BmIadmission from indicator variable to non_indicator variables
HFmrEF_BMI <- move_columns(HFmrEF_matrix_ind_var, HFmrEF_matrix_not_ind,
"BmIadmission")
HFmrEF_matrix_ind_var<- HFmrEF_BMI$from_mat
HFmrEF_matrix_not_ind <- HFmrEF_BMI$to_mat
# Convert zeros to missings, the following variables are not to be convert.
not_zeros_HFpEF <- c("comorbidities", "weightchange", "daysfollowupdischarge",
"Timetonextadm")
not_zeros_HFmrEF <- c("numbercomorditiesnoIDA", "comorbidities", "Timetoadmission",
"Timetoecho", "timetofollowupfromBNP",
"timetofollowupfromdischarge",
"timetofirstcardiachospitalisation")
HFpEF_matrix_not_ind <- zero_to_na(HFpEF_matrix_not_ind, not_zeros_HFpEF)
HFmrEF_matrix_not_ind <- zero_to_na(HFmrEF_matrix_not_ind, not_zeros_HFmrEF)
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
tikz(file="HFpEF_missing_dist.pdf")
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
dev.off()
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
pdf(file="HFpEF_missing_dist.pdf")
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
dev.off()
# Install relevant packages
# source("https://bioconductor.org/biocLite.R")
# biocLite("impute")
# install.packages("reporttools")
# install.packages("VIM")
# Load relevant packages and source helper functions
library(Hmisc)
library(impute)
library(reporttools)
library(VIM)
library(tikzDevice)
source("../_helper_func.R")
# Load HFpEF and HFmrEF datafiles
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
load("../../raw_data/data_use_HFmrEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HFpEF_matrix <- make_na(HFpEF_matrix)
HFmrEF_matrix <- make_na(HFmrEF_matrix)
# Remove the indicator variables as first step of analysis
HFpEF_rm_ind <- rm_indicator(HFpEF_matrix, n_uniq = 5)
HFmrEF_rm_ind <- rm_indicator(HFmrEF_matrix, n_uniq = 5)
HFpEF_matrix_not_ind <- HFpEF_rm_ind$non_indicator
HFmrEF_matrix_not_ind <- HFmrEF_rm_ind$non_indicator
# Store the indicator variables for later
HFpEF_matrix_ind_var <- HFpEF_rm_ind$indicator
HFmrEF_matrix_ind_var <- HFmrEF_rm_ind$indicator
# Move some variables between matrices in HFmrEF dataset
# Change RVfunction from non-indicator to indicator variable
HFmrEF_RV <- move_columns(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var,
"RVfunction")
HFmrEF_matrix_ind_var<- HFmrEF_RV$to_mat
HFmrEF_matrix_not_ind <- HFmrEF_RV$from_mat
# Change BmIadmission from indicator variable to non_indicator variables
HFmrEF_BMI <- move_columns(HFmrEF_matrix_ind_var, HFmrEF_matrix_not_ind,
"BmIadmission")
HFmrEF_matrix_ind_var<- HFmrEF_BMI$from_mat
HFmrEF_matrix_not_ind <- HFmrEF_BMI$to_mat
# Convert zeros to missings, the following variables are not to be converted.
not_zeros_HFpEF <- c("comorbidities", "weightchange", "daysfollowupdischarge",
"Timetonextadm")
not_zeros_HFmrEF <- c("numbercomorditiesnoIDA", "comorbidities", "Timetoadmission",
"Timetoecho", "timetofollowupfromBNP",
"timetofollowupfromdischarge",
"timetofirstcardiachospitalisation")
HFpEF_matrix_not_ind <- zero_to_na(HFpEF_matrix_not_ind, not_zeros_HFpEF)
HFmrEF_matrix_not_ind <- zero_to_na(HFmrEF_matrix_not_ind, not_zeros_HFmrEF)
# Plot of missing valus distribution
pdf(file="HFpEF_missing_dist.pdf")
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
dev.off()
# Install relevant packages
# source("https://bioconductor.org/biocLite.R")
# biocLite("impute")
# install.packages("reporttools")
# install.packages("VIM")
# Load relevant packages and source helper functions
library(Hmisc)
library(impute)
library(reporttools)
library(VIM)
library(tikzDevice)
source("../_helper_func.R")
# Load HFpEF and HFmrEF datafiles
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
load("../../raw_data/data_use_HFmrEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HFpEF_matrix <- make_na(HFpEF_matrix)
HFmrEF_matrix <- make_na(HFmrEF_matrix)
# Remove the indicator variables as first step of analysis
HFpEF_rm_ind <- rm_indicator(HFpEF_matrix, n_uniq = 5)
HFmrEF_rm_ind <- rm_indicator(HFmrEF_matrix, n_uniq = 5)
HFpEF_matrix_not_ind <- HFpEF_rm_ind$non_indicator
HFmrEF_matrix_not_ind <- HFmrEF_rm_ind$non_indicator
# Store the indicator variables for later
HFpEF_matrix_ind_var <- HFpEF_rm_ind$indicator
HFmrEF_matrix_ind_var <- HFmrEF_rm_ind$indicator
# Move some variables between matrices in HFmrEF dataset
# Change RVfunction from non-indicator to indicator variable
HFmrEF_RV <- move_columns(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var,
"RVfunction")
HFmrEF_matrix_ind_var<- HFmrEF_RV$to_mat
HFmrEF_matrix_not_ind <- HFmrEF_RV$from_mat
# Change BmIadmission from indicator variable to non_indicator variables
HFmrEF_BMI <- move_columns(HFmrEF_matrix_ind_var, HFmrEF_matrix_not_ind,
"BmIadmission")
HFmrEF_matrix_ind_var<- HFmrEF_BMI$from_mat
HFmrEF_matrix_not_ind <- HFmrEF_BMI$to_mat
# Convert zeros to missings, the following variables are not to be converted.
not_zeros_HFpEF <- c("comorbidities", "weightchange", "daysfollowupdischarge",
"Timetonextadm")
not_zeros_HFmrEF <- c("numbercomorditiesnoIDA", "comorbidities", "Timetoadmission",
"Timetoecho", "timetofollowupfromBNP",
"timetofollowupfromdischarge",
"timetofirstcardiachospitalisation")
HFpEF_matrix_not_ind <- zero_to_na(HFpEF_matrix_not_ind, not_zeros_HFpEF)
HFmrEF_matrix_not_ind <- zero_to_na(HFmrEF_matrix_not_ind, not_zeros_HFmrEF)
# Install relevant packages
# source("https://bioconductor.org/biocLite.R")
# biocLite("impute")
# install.packages("reporttools")
# install.packages("VIM")
# Load relevant packages and source helper functions
library(Hmisc)
library(impute)
library(reporttools)
library(VIM)
library(tikzDevice)
source("../_helper_func.R")
# Load HFpEF and HFmrEF datafiles
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
load("../../raw_data/data_use_HFmrEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HFpEF_matrix <- make_na(HFpEF_matrix)
HFmrEF_matrix <- make_na(HFmrEF_matrix)
# Remove the indicator variables as first step of analysis
HFpEF_rm_ind <- rm_indicator(HFpEF_matrix, n_uniq = 5)
HFmrEF_rm_ind <- rm_indicator(HFmrEF_matrix, n_uniq = 5)
HFpEF_matrix_not_ind <- HFpEF_rm_ind$non_indicator
HFmrEF_matrix_not_ind <- HFmrEF_rm_ind$non_indicator
# Store the indicator variables for later
HFpEF_matrix_ind_var <- HFpEF_rm_ind$indicator
HFmrEF_matrix_ind_var <- HFmrEF_rm_ind$indicator
# Move some variables between matrices in HFmrEF dataset
# Change RVfunction from non-indicator to indicator variable
HFmrEF_RV <- move_columns(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var,
"RVfunction")
HFmrEF_matrix_ind_var<- HFmrEF_RV$to_mat
HFmrEF_matrix_not_ind <- HFmrEF_RV$from_mat
# Change BmIadmission from indicator variable to non_indicator variables
HFmrEF_BMI <- move_columns(HFmrEF_matrix_ind_var, HFmrEF_matrix_not_ind,
"BmIadmission")
HFmrEF_matrix_ind_var<- HFmrEF_BMI$from_mat
HFmrEF_matrix_not_ind <- HFmrEF_BMI$to_mat
# Convert zeros to missings, the following variables are not to be converted.
not_zeros_HFpEF <- c("comorbidities", "weightchange", "daysfollowupdischarge",
"timetonextadm")
not_zeros_HFmrEF <- c("numbercomorditiesnoida", "comorbidities", "timetoadmission",
"timetoecho", "timetofollowupfrombnp",
"timetofollowupfromdischarge",
"timetofirstcardiachospitalisation")
HFpEF_matrix_not_ind <- zero_to_na(HFpEF_matrix_not_ind, not_zeros_HFpEF)
HFmrEF_matrix_not_ind <- zero_to_na(HFmrEF_matrix_not_ind, not_zeros_HFmrEF)
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
# Install relevant packages
# source("https://bioconductor.org/biocLite.R")
# biocLite("impute")
# install.packages("reporttools")
# install.packages("VIM")
# Load relevant packages and source helper functions
library(Hmisc)
library(impute)
library(reporttools)
library(VIM)
library(tikzDevice)
source("../_helper_func.R")
# Load HFpEF and HFmrEF datafiles
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
load("../../raw_data/data_use_HFmrEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HFpEF_matrix <- make_na(HFpEF_matrix)
HFmrEF_matrix <- make_na(HFmrEF_matrix)
# Remove the indicator variables as first step of analysis
HFpEF_rm_ind <- rm_indicator(HFpEF_matrix, n_uniq = 5)
HFmrEF_rm_ind <- rm_indicator(HFmrEF_matrix, n_uniq = 5)
HFpEF_matrix_not_ind <- HFpEF_rm_ind$non_indicator
HFmrEF_matrix_not_ind <- HFmrEF_rm_ind$non_indicator
# Store the indicator variables for later
HFpEF_matrix_ind_var <- HFpEF_rm_ind$indicator
HFmrEF_matrix_ind_var <- HFmrEF_rm_ind$indicator
# Move some variables between matrices in HFmrEF dataset
# Change RVfunction from non-indicator to indicator variable
HFmrEF_RV <- move_columns(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var,
"rvfunction")
HFmrEF_matrix_ind_var<- HFmrEF_RV$to_mat
HFmrEF_matrix_not_ind <- HFmrEF_RV$from_mat
# Change BmIadmission from indicator variable to non_indicator variables
HFmrEF_BMI <- move_columns(HFmrEF_matrix_ind_var, HFmrEF_matrix_not_ind,
"bmiadmission")
HFmrEF_matrix_ind_var<- HFmrEF_BMI$from_mat
HFmrEF_matrix_not_ind <- HFmrEF_BMI$to_mat
# Convert zeros to missings, the following variables are not to be converted.
not_zeros_HFpEF <- c("comorbidities", "weightchange", "daysfollowupdischarge",
"timetonextadm")
not_zeros_HFmrEF <- c("numbercomorditiesnoida", "comorbidities", "timetoadmission",
"timetoecho", "timetofollowupfrombnp",
"timetofollowupfromdischarge",
"timetofirstcardiachospitalisation")
HFpEF_matrix_not_ind <- zero_to_na(HFpEF_matrix_not_ind, not_zeros_HFpEF)
HFmrEF_matrix_not_ind <- zero_to_na(HFmrEF_matrix_not_ind, not_zeros_HFmrEF)
aggr(cbind(HFpEF_matrix_not_ind, HFpEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
aggr(cbind(HFmrEF_matrix_not_ind, HFmrEF_matrix_ind_var), plot = T,
sortVars = T, bars = F, combined = T, ylabs = "", cex.axis = 0.7)
RStudio.Version()
