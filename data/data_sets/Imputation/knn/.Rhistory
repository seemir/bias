# Store the indicator variables for later
ind_var_idx <- !(colnames(HEpEF_matrix) %in% colnames(HEpEF_matrix_no_ind))
HEpEF_matrix_ind_var <- HEpEF_matrix[, ind_var_idx]
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Merge the indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
sum(pmv(HEpEF_matrix)$rel_pmv_vec)
pmv(HEpEF_matrix)$rel_pmv_vec
View(pmv(HEpEF_matrix)$rel_pmv_vec)
View(pmv(HEpEF_matrix)$rel_pmv_vec)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)
# Store the indicator variables for later
ind_var_idx <- !(colnames(HEpEF_matrix) %in% colnames(HEpEF_matrix_no_ind))
HEpEF_matrix_ind_var <- HEpEF_matrix[, ind_var_idx]
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Merge the indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
pmv(HEpEF_matrix)
View(pmv(HEpEF_matrix))
View(HEpEF_matrix)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
View(HEpEF_matrix)
View(pmv(HEpEF_matrix))
View(pmv(HEpEF_matrix))
View(cbind(pmv(HEpEF_matrix), pzv(HEpEF_matrix))
View(cbind(pmv(HEpEF_matrix), pzv(HEpEF_matrix)))
View(cbind(pmv(HEpEF_matrix)$pmv_vec, pzv(HEpEF_matrix)$pmv_vec))
View(cbind(pmv(HEpEF_matrix)$pmv_vec, pzv(HEpEF_matrix)$pzv_vec))
miss_zero <- cbind(pmv(HEpEF_matrix)$pmv_vec, pzv(HEpEF_matrix)$pzv_vec)
names(miss_zero) <- c('missings', 'zeros')
View(miss_zero)
miss_zero <- cbind(pmv(HEpEF_matrix)$pmv_vec, pzv(HEpEF_matrix)$pzv_vec)
colnames(miss_zero) <- c('missings', 'zeros')
View(miss_zero)
rm_indicator
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
rm_indicator
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)
View(HEpEF_matrix_no_ind)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Merge the indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(pmv(HEpEF_matrix))
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Merge the indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(pmv(HEpEF_matrix))
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Merge the indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(pmv(HEpEF_matrix))
View(pzv(HEpEF_matrix))
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Merge the indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(summary_zv(HEpEF_matrix))
View(summary_mv(HEpEF_matrix))
?summary_mv
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Merge the indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(summary_mv(HEpEF_matrix))
?summary_mv
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables
HEpEF_matrix_ind_var_imputted <- impute.knn(HEpEF_matrix_ind_var)$data
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables
HEpEF_matrix_ind_var <- impute.knn(HEpEF_matrix_ind_var, colmax = 1)$data
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
# HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(HEpEF_matrix_ind_var)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
# HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(HEpEF_matrix_ind_var)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables
HEpEF_matrix_ind_var <- impute.knn(HEpEF_matrix_ind_var, colmax = 1)$data
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
# HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
View(HEpEF_matrix_ind_var)
?impute.knn
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
HEpEF_matrix_ind_var <- impute.knn(HEpEF_matrix_ind_var, colmax = 1)$data
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
# HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
HEpEF_matrix_ind_var <- impute.knn(HEpEF_matrix_ind_var, colmax = 1)$data
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros)
impute.knn.vectorised <- Vectorize(impute.knn)
impute.knn.vectorised
impute.knn.vectorised(HEpEF_matrix, k_vec, colmax = 1)
k_vec = seq(1,10)
impute.knn.vectorised(HEpEF_matrix, k_vec, colmax = 1)
rm(l_vec)
rm(k_vec)
rm(impute.knn.vectorised())
rm(impute.knn.vectorised
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros)
# Save the data as .Rdat
save(HEpEF_matrix_k_10, file='data_use_HFpEF_matrix_k_10.Rdat')
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros, filename)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(as.character(HEpEF_matrix), '_k_', as.character(K)), collapse = "")
save(HEpEF_matrix, file=filename)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros, filename)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(as.character(HEpEF_matrix), '_k_', as.character(K)), collapse = "")
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(deparse(substitute(HEpEF_matrix)), '_k_',
as.character(K)), collapse = "")
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(deparse(substitute(HEpEF_matrix)), '_k_',
as.character(K)), collapse = "")
save(HEpEF_matrix, file=filename)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros, filename)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(deparse(substitute(HEpEF_matrix)), '_k_',
as.character(K), '.Rdat'), collapse = "")
save(HEpEF_matrix, file=filename)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros, filename)
View(HEpEF_matrix)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
# Inpute indicator variables and non-indicator variables (k = 10)
K = 10
HEpEF_matrix_ind_var <- round(impute.knn(HEpEF_matrix_ind_var, k = K, colmax = 1)$data)
HEpEF_matrix_no_ind <- impute.knn(HEpEF_matrix_no_ind, k = K, colmax = 1)$data
# Merge the imputed indicator variables with non-indicator variables
HEpEF_matrix <- cbind(HEpEF_matrix_no_ind, HEpEF_matrix_ind_var)
# Save the data as .Rdat
filename <- paste(c(deparse(substitute(HEpEF_matrix)), '_k_',
as.character(K), '.Rdat'), collapse = "")
save(HEpEF_matrix, file=filename)
rm(HEpEF_matrix_ind_var, HEpEF_matrix_no_ind, not_zeros, filename)
View(HEpEF_matrix)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
View(HEpEF_matrix)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
View(HEpEF_matrix_no_ind)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
View(HEpEF_matrix_ind_var)
#Load package for knn imputation
library(impute)
source("../_helper_func.R")
# Load HFpEF datafile
load("../../raw_data/data_use_HFpEF_matrix.Rdat")
# Replace NaN values with NA using the make_na function
HEpEF_matrix <- make_na(HEpEF_matrix)
# Remove the indicator variables as first step of analysis
HEpEF_matrix_no_ind <- rm_indicator(HEpEF_matrix, n_uniq = 5)$non_indicator
# Store the indicator variables for later
HEpEF_matrix_ind_var <- rm_indicator(HEpEF_matrix, n_uniq = 5)$indicator
# Convert zeros to na, the following variables are not to be convert.
not_zeros <- c("comorbidities", "weightchange", "daysfollowupdischarge", "Timetonextadm")
HEpEF_matrix_no_ind <- zero_to_na(HEpEF_matrix_no_ind, not_zeros)
View(HEpEF_matrix_no_ind)
