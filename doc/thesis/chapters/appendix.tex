\documentclass[../thesis.tex]{subfiles}

\begin{document}

\appendix

\chapter{Data Description}
\label{chap:data_desc}

\noindent In this appendix we present a descriptive overview of the data used in this thesis. This includes: an overview and explanation of the variables used (\ref{sec:variables}), the \texttt{R}-packages (\ref{sec:r_pack}) used and some relevant plots (\ref{sec:rel_plots}) to support the finding in the thesis. The source code used to produce the relevant plots can be found in appendix (\ref{chap:souce_code}).  

\section{Variables}
\label{sec:variables}

\input{doc/thesis/tables/variables.tex}

\section{\texttt{R}-packages}
\label{sec:r_pack}

\input{doc/thesis/tables/packages.tex}

\newpage

\section{Descriptive statistics}
\label{sec:desc_stat}

\input{doc/thesis/tables/HFpEF_desc_stat.tex}

\input{doc/thesis/tables/HFmrEF_desc_stat.tex}

\newpage

\input{doc/thesis/tables/baseline_char_phys_hfpef_hc.tex}

\newpage

\input{doc/thesis/tables/baseline_char_phys_hfpef_km.tex}

\newpage

\input{doc/thesis/tables/baseline_char_phys_hfpef_em.tex}

\newpage

\input{doc/thesis/tables/baseline_char_phys_hfmref_hc.tex}

\newpage

\input{doc/thesis/tables/baseline_char_phys_hfmref_km.tex}

\newpage

\input{doc/thesis/tables/baseline_char_phys_hfmref_em.tex}

\newpage

\input{doc/thesis/tables/baseline_char_nophys_hfpef_hc.tex}

\newpage

\input{doc/thesis/tables/baseline_char_nophys_hfpef_km.tex}

\newpage

\input{doc/thesis/tables/baseline_char_nophys_hfpef_em.tex}

\newpage

\input{doc/thesis/tables/baseline_char_nophys_hfmref_hc.tex}

\newpage

\input{doc/thesis/tables/baseline_char_nophys_hfmref_km.tex}

\newpage

\input{doc/thesis/tables/baseline_char_nophys_hfmref_em.tex}

\newpage

\section{Relevant plots}
\label{sec:rel_plots}

\begin{figure}[h!]
    \centering
    \hspace*{-1cm}\includegraphics[width=1.1\textwidth]{doc/thesis/images/HFpEF_miss_dist.pdf}
    \caption[Missing values in HFpEF data set]{\textit{Missing values in HFpEF data set. Top:  the amount of missing values in each variable sorted in ascending order. Bottom: plot of the combinations of missing (red) and non-missing (blue) values in the HFpEF data set.}}
    \label{fig:HFpEF_missing}
\end{figure}

\newpage

\begin{figure}[h!]
    \centering
    \hspace*{-1cm}\includegraphics[width=1.1\textwidth]{doc/thesis/images/HFmrEF_miss_dist.pdf}
    \caption[Missing values in HFmrEF data set]{\textit{Missing values in HFmrEF data set. Top:  the amount of missing values in each variable sorted in ascending order. Bottom: plot of the combinations of missing (red) and non-missing (blue) values in the HFmrEF data set.}}
    \label{fig:HFmrEF_missing}
\end{figure}

\newpage

\begin{figure}[h!]
    \centering
    \hspace*{-1cm}\includegraphics[width=1.1\textwidth]{doc/thesis/images/ClustFull.pdf}
    \caption[Binary clustering problem]{\textit{Results of Binary clustering problem}}
    \label{fig:bi_clust_results}
\end{figure}

\newpage

\begin{figure}[h!]
    \centering
    \hspace*{-1cm}\includegraphics[width=1.1\textwidth]{doc/thesis/images/ClustpPhy.pdf}
    \caption[HFpEF with Post-Diagnosis]{\textit{Clustering results of HFpEF with Post-Diagnosis}}
    \label{fig:clust_results_with_post_p}
\end{figure}

\newpage

\begin{figure}[h!]
    \centering
    \hspace*{-1cm}\includegraphics[width=1.1\textwidth]{doc/thesis/images/ClustmrPhy.pdf}
    \caption[HFmrEF with Post-Diagnosis]{\textit{Clustering results of HFmrEF with Post-Diagnosis}}
    \label{fig:clust_results_with_post_mr}
\end{figure}

\newpage

\begin{figure}[h!]
    \centering
    \hspace*{-1cm}\includegraphics[width=1.1\textwidth]{doc/thesis/images/ClustpNoPhy.pdf}
    \caption[HFpEF without Post-Diagnosis]{\textit{Clustering results of HFpEF \textit{without} Post-Diagnosis}}
    \label{fig:clust_results_without_post_p}
\end{figure}

\newpage

\begin{figure}[h!]
    \centering
    \hspace*{-1cm}\includegraphics[width=1.1\textwidth]{doc/thesis/images/ClustmrNoPhy.pdf}
    \caption[HFmrEF without Post-Diagnosis]{\textit{Clustering results of HFmrEF \textit{without} Post-Diagnosis}}
    \label{fig:clust_results_without_post_mr}
\end{figure}

\chapter{Source code}
\label{chap:souce_code}

\noindent The following appendix presents all the relevant \texttt{R}-code used in this thesis. We have organized the chapter in accordance with the various steps in the machine learning procedure adopted in this thesis, see figure (\ref{fig:ML_proc_thesis}). We have tried to comment as much of the source code in order to ensure that an eventual re-examination of the results can be as easy and smooth as possible. Inquires about the code can be forwarded to the author on request.

\section{Packages}
\label{sec:pack_code}

\lstinputlisting[language=R]{../../data/data_sets/source/packages.R}

\section{Utilities}
\label{sec:utilities}

\lstinputlisting[language=R]{../../data/data_sets/source/utilities.R}

\section{Descriptive statistics}
\label{sec:app_desc_stat}

\lstinputlisting[language=R]{../../data/data_sets/source/desc_stat.R}

\section{Pre-processing}
\label{sec:pre_proc}

\lstinputlisting[language=R]{../../data/data_sets/source/pre_process.R}

\subsection{Consolidation}
\label{sec:consolidation}

\lstinputlisting[language=R]{../../data/data_sets/raw_data/consolidation.R}

\section{Clustering}
\label{sec:clust}

\lstinputlisting[language=R]{../../data/data_sets/source/clustering.R}

\section{Classification}
\label{sec:classifi}

\lstinputlisting[language=R]{../../data/data_sets/source/classification.R}

\end{document}